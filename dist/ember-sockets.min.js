/*! ember-sockets by Adam Timberlake created on 2021-05-10 */

!function(t,c,s,a){"use strict";t.EmberSockets=c.Controller.extend({NAMESPACE:"sockets",host:"",secure:!1,port:null,controllers:[],socket:null,init:function(){c.get(this,"autoConnect")&&this.connect()},connect:function(t){var e,o,n,i="";r=this,e=c.get(r,"host"),o=c.get(r,"port"),n=!0===c.get(r,"secure")?"https":"http",r=c.get(r,"path")||"",(e||o)&&(i=o?n+"://"+e+":"+o+"/"+r:n+"://"+e+"/"+r);var r=c.get(this,"options")||{},t=s(t&&t.namespace?t.namespace:i,a.extend(r,t||{}));t.on("error",this.error),this.set("socket",t),t.on("connect",Ember.run.bind(this,this._listen))},error:function(t){if("object"!=typeof window.Honeybadger||"function"!=typeof window.Honeybadger.notify)throw console.error(t),"EmberSockets: An error occurred.";(t=!("string"==typeof t||t instanceof Error)?JSON.stringify(t):t)instanceof Error&&(void 0!==t.type&&(t.message=t.type+": "+t.message),void 0!==t.description&&(t.message=t.message+" ("+t.description+")")),Honeybadger.notify({error:t,context:{component:"EmberSockets"}})},emit:function(t,e){var o=Array.prototype.slice.call(arguments),n=c.get(this,"socket");n.emit.apply(n,o)},_listen:function(){function n(){var t=Array.prototype.slice.call(arguments);s._update.call(s,this,t)}var t=c.get(this,"controllers"),i=Ember.run.bind(this,this._getController),r=[],s=this;t.forEach(function(t){var t=i(t),e=t[this.NAMESPACE];if(t)for(var o in"object"==typeof t[this.NAMESPACE]&&"function"==typeof t[this.NAMESPACE].connect&&t[this.NAMESPACE].connect.apply(t),e)e.hasOwnProperty(o)&&-1===r.indexOf(o)&&(r.push(o),c.get(s,"socket").removeAllListeners(o),c.get(s,"socket").on(o,n.bind(o)))},this)},_update:function(e,n){var t=c.get(this,"controllers"),i=0,r=Ember.run.bind(this,this._getController);return c.run(this,function(){t.forEach(function(t){var o=r(t);if(o){t=o[this.NAMESPACE][e];if(t)return"function"==typeof t?t.apply(o,n):c.isArray(t)?t.forEach(function(t,e){c.set(o,t,n[e])}):c.set(o,t,n),void i++}},this)}),i},_getController:function(t){t="controller:"+t;t=Ember.getOwner(this).lookup(t);return!(!t||this.NAMESPACE in t==!1)&&t}}),c.onLoad("Ember.Application",function(t){t.initializer({name:"sockets",initialize:function(t){if(void 0===t.Socket)throw"You have forgotten to add `EmberSockets` into `Ember.Application`! See: https://github.com/Wildhoney/EmberSockets#getting-started";t.register("socket:main",t.Socket,{singleton:!0}),t.inject("controller","socket","socket:main"),t.inject("route","socket","socket:main")}})})}(window,window.Ember,window.io,window.jQuery);