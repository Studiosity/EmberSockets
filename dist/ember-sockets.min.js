/*! ember-sockets by Adam Timberlake created on 2018-09-26 */
!function(a,b,c,d){"use strict";a.EmberSockets=b.Controller.extend({NAMESPACE:"sockets",host:"",secure:!1,port:null,controllers:[],socket:null,init:function(){b.get(this,"autoConnect")&&this.connect()},connect:function(a){var e="";!function(a){var c=b.get(a,"host"),d=b.get(a,"port"),f=b.get(a,"secure")===!0?"https":"http",g=b.get(a,"path")||"";(c||d)&&(e=d?"%@://%@:%@/%@".fmt(f,c,d,g):"%@://%@/%@".fmt(f,c,g))}(this);var f=b.get(this,"options")||{},g=c(a&&a.namespace?a.namespace:e,d.extend(f,a||{}));g.on("error",this.error),this.set("socket",g),g.on("connect",Ember.run.bind(this,this._listen))},error:function(a){if("object"!=typeof window.airbrake||"function"!=typeof window.airbrake.notify)throw console.error(a),"EmberSockets: An error occurred.";"string"==typeof a||a instanceof Error||(a=JSON.stringify(a)),a instanceof Error&&("undefined"!=typeof a.type&&(a.message=a.type+": "+a.message),"undefined"!=typeof a.description&&(a.message=a.message+" ("+a.description+")")),window.airbrake.notify({error:a,context:{component:"EmberSockets"}})},emit:function(a,c){var d=Array.prototype.slice.call(arguments),e=b.get(this,"socket");e.emit.apply(e,d)},_listen:function(){var a=b.get(this,"controllers"),c=Ember.run.bind(this,this._getController),d=[],e=this,f=function(){var a=Array.prototype.slice.call(arguments);e._update.call(e,this,a)};a.forEach(function(a){var g=c(a),h=g[this.NAMESPACE];if(g){"object"==typeof g[this.NAMESPACE]&&"function"==typeof g[this.NAMESPACE].connect&&g[this.NAMESPACE].connect.apply(g);for(var i in h)if(h.hasOwnProperty(i)){if(-1!==d.indexOf(i))continue;d.push(i),b.get(e,"socket").removeAllListeners(i),b.get(e,"socket").on(i,f.bind(i))}}},this)},_update:function(a,c){var d=b.get(this,"controllers"),e=0,f=Ember.run.bind(this,this._getController);return b.run(this,function(){d.forEach(function(d){var g=f(d);if(g){var h=g[this.NAMESPACE][a];if(!h)return;if("function"==typeof h)return h.apply(g,c),void e++;if(b.isArray(h))return h.forEach(function(a,d){b.set(g,a,c[d])}),void e++;b.set(g,h,c),e++}},this)}),e},_getController:function(a){a="controller:%@".fmt(a);var b=Ember.getOwner(this).lookup(a);return b&&this.NAMESPACE in b!=!1?b:!1}}),b.onLoad("Ember.Application",function(a){a.initializer({name:"sockets",initialize:function(a){if("undefined"==typeof a.Socket)throw"You have forgotten to add `EmberSockets` into `Ember.Application`! See: https://github.com/Wildhoney/EmberSockets#getting-started";a.register("socket:main",a.Socket,{singleton:!0}),a.inject("controller","socket","socket:main"),a.inject("route","socket","socket:main")}})})}(window,window.Ember,window.io,window.jQuery);